import{b as K,i as Q}from"./chunk-L2BPLFFX.js";import{a as X,c as Y,e as ee,g as te,k as ne}from"./chunk-JBCLMUG2.js";import{$ as H,$a as i,A as V,Ba as r,D as R,Db as J,E as U,Ka as w,La as $,Oa as g,Q as P,R as j,Va as u,W as C,Wa as q,Xa as m,Ya as L,Za as O,_a as I,aa as h,ab as o,ba as f,bb as p,ca as b,cb as _,da as A,db as d,eb as a,ib as Z,ja as S,jb as l,kb as v,ma as B,oa as M,ya as G,za as W}from"./chunk-CGNNIBNW.js";function ae(t,n){if(t&1&&(i(0,"a",2),l(1," Read more ... "),o()),t&2){let e=a();u("href",e.story.url,W)}}var T=class t{story;static \u0275fac=function(e){return new(e||t)};static \u0275cmp=w({type:t,selectors:[["app-newest-story"]],inputs:{story:"story"},decls:3,vars:2,consts:[[1,"story-card"],[1,"story-card-header",3,"innerHTML"],["target","_blank",1,"story-card-url",3,"href"]],template:function(e,s){e&1&&(i(0,"div",0),p(1,"h2",1),g(2,ae,2,1,"a",2),o()),e&2&&(r(),u("innerHTML",s.story.title,G),r(),m(s.story.url?2:-1))},styles:[`@layer properties;.story-card[_ngcontent-%COMP%]{display:flex;height:100%;flex-direction:column;justify-content:space-between;border-radius:var(--radius-xl, .75rem);background-color:var(--color-gray-800, oklch(27.8% .033 256.848));padding:calc(var(--spacing, .25rem) * 5);color:var(--color-white, #fff)}.story-card-header[_ngcontent-%COMP%]{margin-bottom:calc(var(--spacing, .25rem) * 3);font-size:var(--text-2xl, 1.5rem);line-height:var(--tw-leading, var(--text-2xl--line-height, calc(2 / 1.5)));--tw-font-weight: var(--font-weight-semibold, 600);font-weight:var(--font-weight-semibold, 600);color:var(--color-white, #fff)}.story-card-url[_ngcontent-%COMP%]{color:var(--color-blue-400, oklch(70.7% .165 254.624))}@media (hover: hover){.story-card-url[_ngcontent-%COMP%]:hover{text-decoration-line:underline}}@property --tw-font-weight{syntax: "*"; inherits: false;}@layer properties{@supports ((-webkit-hyphens: none) and (not (margin-trim: inline))) or ((-moz-orient: inline) and (not (color:rgb(from red r g b)))){*[_ngcontent-%COMP%], [_ngcontent-%COMP%]:before, [_ngcontent-%COMP%]:after, [_ngcontent-%COMP%]::backdrop{--tw-font-weight: initial}}}

`]})};var ie={production:!1,apiUrl:"https://localhost:7128/api/"};var k=class t{apiUrl=ie.apiUrl;http=C(K);createUrl(n){return this.apiUrl+n}get(n){return this.http.get(this.createUrl(n))}static \u0275fac=function(e){return new(e||t)};static \u0275prov=P({token:t,factory:t.\u0275fac,providedIn:"root"})};var N=class t{httpService=C(k);constructor(){}get(n){return this.httpService.get(`neweststories?pageIndex=${n.pageIndex}&pageSize=${n.pageSize}&searchText=${encodeURIComponent(n.searchText)}`)}static \u0275fac=function(e){return new(e||t)};static \u0275prov=P({token:t,factory:t.\u0275fac,providedIn:"root"})};var E=class t{debounceTimeMs=B(500);search=new S;searchControl=new ee("");constructor(){this.searchControl.valueChanges.pipe(V(this.debounceTimeMs()),U()).subscribe(n=>this.search.emit(n??""))}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=w({type:t,selectors:[["app-search-bar"]],inputs:{debounceTimeMs:[1,"debounceTimeMs"]},outputs:{search:"search"},decls:5,vars:1,consts:[["searchInput",""],[1,"search-bar"],["id","searchInput","name","searchInput","type","text","placeholder","Search...",1,"search-bar-input",3,"formControl"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor","stroke-width","2",1,"h-5","w-5","text-gray-400","ml-2",3,"click"],["stroke-linecap","round","stroke-linejoin","round","d","M21 21l-4.35-4.35m0 0A7.5 7.5 0 1116.65 6.65a7.5 7.5 0 010 10.6z"]],template:function(e,s){if(e&1){let c=_();i(0,"div",1),p(1,"input",2,0),b(),i(3,"svg",3),d("click",function(){h(c);let re=Z(2);return f(re.focus())}),p(4,"path",4),o()()}e&2&&(r(),u("formControl",s.searchControl))},dependencies:[ne,X,Y,te],styles:[`@layer properties;.search-bar[_ngcontent-%COMP%]{display:flex;align-items:center;border-radius:var(--radius-lg, .5rem);background-color:var(--color-gray-800, oklch(27.8% .033 256.848));padding-inline:calc(var(--spacing, .25rem) * 3);padding-block:calc(var(--spacing, .25rem) * 1);--tw-ring-color: var(--color-blue-500, oklch(62.3% .214 259.815))}.search-bar[_ngcontent-%COMP%]:focus-within{--tw-ring-shadow: var(--tw-ring-inset,) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color, currentcolor);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.search-bar-input[_ngcontent-%COMP%]{width:calc(var(--spacing, .25rem) * 48);flex-grow:1;background-color:transparent;color:var(--color-white, #fff);--tw-outline-style: none;outline-style:none}.search-bar-input[_ngcontent-%COMP%]::placeholder{color:var(--color-gray-400, oklch(70.7% .022 261.325))}@media (width >= 40rem){.search-bar-input[_ngcontent-%COMP%]{width:calc(var(--spacing, .25rem) * 64)}}@property --tw-shadow{syntax: "*"; inherits: false; initial-value: 0 0 #0000;}@property --tw-shadow-color{syntax: "*"; inherits: false;}@property --tw-shadow-alpha{syntax: "<percentage>"; inherits: false; initial-value: 100%;}@property --tw-inset-shadow{syntax: "*"; inherits: false; initial-value: 0 0 #0000;}@property --tw-inset-shadow-color{syntax: "*"; inherits: false;}@property --tw-inset-shadow-alpha{syntax: "<percentage>"; inherits: false; initial-value: 100%;}@property --tw-ring-color{syntax: "*"; inherits: false;}@property --tw-ring-shadow{syntax: "*"; inherits: false; initial-value: 0 0 #0000;}@property --tw-inset-ring-color{syntax: "*"; inherits: false;}@property --tw-inset-ring-shadow{syntax: "*"; inherits: false; initial-value: 0 0 #0000;}@property --tw-ring-inset{syntax: "*"; inherits: false;}@property --tw-ring-offset-width{syntax: "<length>"; inherits: false; initial-value: 0px;}@property --tw-ring-offset-color{syntax: "*"; inherits: false; initial-value: #fff;}@property --tw-ring-offset-shadow{syntax: "*"; inherits: false; initial-value: 0 0 #0000;}@layer properties{@supports ((-webkit-hyphens: none) and (not (margin-trim: inline))) or ((-moz-orient: inline) and (not (color:rgb(from red r g b)))){*[_ngcontent-%COMP%], [_ngcontent-%COMP%]:before, [_ngcontent-%COMP%]:after, [_ngcontent-%COMP%]::backdrop{--tw-shadow: 0 0 #0000;--tw-shadow-color: initial;--tw-shadow-alpha: 100%;--tw-inset-shadow: 0 0 #0000;--tw-inset-shadow-color: initial;--tw-inset-shadow-alpha: 100%;--tw-ring-color: initial;--tw-ring-shadow: 0 0 #0000;--tw-inset-ring-color: initial;--tw-inset-ring-shadow: 0 0 #0000;--tw-ring-inset: initial;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-offset-shadow: 0 0 #0000}}}

`]})};function se(t,n){t&1&&(i(0,"p",1),l(1,"No results"),o())}function le(t,n){if(t&1&&(i(0,"a",9),l(1),o()),t&2){let e=a().$implicit;r(),v(e)}}function ce(t,n){if(t&1){let e=_();i(0,"a",11),d("click",function(){h(e);let c=a().$implicit,x=a(3);return f(x.onChange(c))}),l(1),o()}if(t&2){let e=a().$implicit;r(),v(e)}}function pe(t,n){if(t&1&&g(0,le,2,1,"a",9)(1,ce,2,1,"a",10),t&2){let e=n.$implicit,s=a(3);m(e==s.selectedPage?0:1)}}function ge(t,n){if(t&1){let e=_();i(0,"nav",3)(1,"a",4),d("click",function(){h(e);let c=a(2);return f(c.onChange(c.selectedPage-1))}),b(),i(2,"svg",5),p(3,"path",6),o()(),O(4,pe,2,1,null,null,L),A(),i(6,"a",7),d("click",function(){h(e);let c=a(2);return f(c.onChange(c.selectedPage+1))}),b(),i(7,"svg",5),p(8,"path",8),o()()()}if(t&2){let e=a(2);r(4),I(e.pages)}}function me(t,n){if(t&1&&(i(0,"p",1),l(1," Showing "),i(2,"span",2),l(3),o(),l(4," to "),i(5,"span",2),l(6),o(),l(7," of "),i(8,"span",2),l(9),o(),l(10," results "),o(),g(11,ge,9,0,"nav",3)),t&2){let e=a();r(3),v(e.startItemIndex),r(3),v(e.endItemIndex),r(3),v(e.totalItemsCount),r(2),m(e.pageTo>1?11:-1)}}var D=class t{SHOW_PAGES_COUNT=5;pagination=null;change=new S;startItemIndex=0;endItemIndex=0;pageFrom=0;pageTo=0;selectedPage=0;totalItemsCount=0;pages=[];ngOnChanges(n){if(this.pagination==null){this.resetPages();return}this.selectedPage=this.pagination.selectedPage,this.totalItemsCount=this.pagination.totalItemsCount,this.calcStartEnd(this.pagination),this.calcPages(this.pagination)}onChange(n){n<1||this.pagination!=null&&(n>this.pagination.totalPages||this.change.emit(n))}resetPages(){this.startItemIndex=0,this.endItemIndex=0,this.pageFrom=1,this.pageTo=1,this.selectedPage=0,this.totalItemsCount=0,this.pages=[]}calcStartEnd(n){this.startItemIndex=(n.selectedPage-1)*n.pageSize+1,this.endItemIndex=Math.min(n.selectedPage*n.pageSize,n.totalItemsCount)}calcPages(n){n.selectedPage<this.SHOW_PAGES_COUNT-1?(this.pageFrom=1,this.pageTo=Math.min(n.totalPages,this.SHOW_PAGES_COUNT+1)):(this.pageFrom=Math.max(1,n.selectedPage-Math.floor(this.SHOW_PAGES_COUNT/2)),this.pageTo=Math.min(n.totalPages+1,this.pageFrom+this.SHOW_PAGES_COUNT),this.pageFrom=this.pageTo-this.SHOW_PAGES_COUNT),this.pages=Array.from({length:this.pageTo-this.pageFrom},(e,s)=>s+this.pageFrom)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=w({type:t,selectors:[["app-pagination"]],inputs:{pagination:"pagination"},outputs:{change:"change"},features:[H],decls:3,vars:1,consts:[[1,"pagination"],[1,"pagination-info"],[1,"font-medium"],["aria-label","Pagination",1,"inline-flex","-space-x-px"],[1,"rounded-l-md","page-button",3,"click"],["viewBox","0 0 20 20","fill","currentColor","aria-hidden","true","data-slot","icon",1,"size-5"],["fill-rule","evenodd","d","M11.78 5.22a.75.75 0 0 1 0 1.06L8.06 10l3.72 3.72a.75.75 0 1 1-1.06 1.06l-4.25-4.25a.75.75 0 0 1 0-1.06l4.25-4.25a.75.75 0 0 1 1.06 0Z","clip-rule","evenodd"],[1,"rounded-r-md","page-button",3,"click"],["fill-rule","evenodd","d","M8.22 5.22a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 0 1 0 1.06l-4.25 4.25a.75.75 0 0 1-1.06-1.06L11.94 10 8.22 6.28a.75.75 0 0 1 0-1.06Z","clip-rule","evenodd"],["aria-current","page",1,"page-active"],[1,"page"],[1,"page",3,"click"]],template:function(e,s){e&1&&(i(0,"div",0),g(1,se,2,0,"p",1)(2,me,12,4),o()),e&2&&(r(),m(s.totalItemsCount==0?1:2))},styles:[`@layer properties;.pagination[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:space-between;gap:calc(var(--spacing, .25rem) * 2);border-radius:var(--radius-xl, .75rem);background-color:transparent;padding-inline:calc(var(--spacing, .25rem) * 4);padding-block:calc(var(--spacing, .25rem) * 3)}@media (width >= 40rem){.pagination[_ngcontent-%COMP%]{flex-direction:row}}.pagination-info[_ngcontent-%COMP%]{font-size:var(--text-sm, .875rem);line-height:var(--tw-leading, var(--text-sm--line-height, calc(1.25 / .875)));color:var(--color-white, #fff)}.page-button[_ngcontent-%COMP%]{cursor:pointer;padding:calc(var(--spacing, .25rem) * 2);color:var(--color-white, #fff);--tw-ring-shadow: var(--tw-ring-inset,) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color, currentcolor);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow);--tw-ring-color: var(--color-gray-300, oklch(87.2% .01 258.338));-webkit-user-select:none;user-select:none;--tw-ring-inset: inset}@media (hover: hover){.page-button[_ngcontent-%COMP%]:hover{background-color:var(--color-gray-50, oklch(98.5% .002 247.839))}}@media (hover: hover){.page-button[_ngcontent-%COMP%]:hover{color:var(--color-black, #000)}}@media (hover: hover){.page-button[_ngcontent-%COMP%]:hover{--tw-ring-color: var(--color-white, #fff)}}.page[_ngcontent-%COMP%]{width:calc(var(--spacing, .25rem) * 10);cursor:pointer;align-items:center;padding-block:calc(var(--spacing, .25rem) * 2);text-align:center;font-size:var(--text-sm, .875rem);line-height:var(--tw-leading, var(--text-sm--line-height, calc(1.25 / .875)));--tw-font-weight: var(--font-weight-semibold, 600);font-weight:var(--font-weight-semibold, 600);color:var(--color-white, #fff);--tw-ring-shadow: var(--tw-ring-inset,) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color, currentcolor);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow);--tw-ring-color: var(--color-gray-300, oklch(87.2% .01 258.338));-webkit-user-select:none;user-select:none;--tw-ring-inset: inset}@media (hover: hover){.page[_ngcontent-%COMP%]:hover{background-color:var(--color-gray-50, oklch(98.5% .002 247.839))}}@media (hover: hover){.page[_ngcontent-%COMP%]:hover{color:var(--color-black, #000)}}@media (hover: hover){.page[_ngcontent-%COMP%]:hover{--tw-ring-color: var(--color-white, #fff)}}.page-active[_ngcontent-%COMP%]{width:calc(var(--spacing, .25rem) * 10);cursor:pointer;align-items:center;background-color:var(--color-gray-50, oklch(98.5% .002 247.839));padding-block:calc(var(--spacing, .25rem) * 2);text-align:center;font-size:var(--text-sm, .875rem);line-height:var(--tw-leading, var(--text-sm--line-height, calc(1.25 / .875)));--tw-font-weight: var(--font-weight-semibold, 600);font-weight:var(--font-weight-semibold, 600);color:var(--color-black, #000);-webkit-user-select:none;user-select:none}@property --tw-shadow{syntax: "*"; inherits: false; initial-value: 0 0 #0000;}@property --tw-shadow-color{syntax: "*"; inherits: false;}@property --tw-shadow-alpha{syntax: "<percentage>"; inherits: false; initial-value: 100%;}@property --tw-inset-shadow{syntax: "*"; inherits: false; initial-value: 0 0 #0000;}@property --tw-inset-shadow-color{syntax: "*"; inherits: false;}@property --tw-inset-shadow-alpha{syntax: "<percentage>"; inherits: false; initial-value: 100%;}@property --tw-ring-color{syntax: "*"; inherits: false;}@property --tw-ring-shadow{syntax: "*"; inherits: false; initial-value: 0 0 #0000;}@property --tw-inset-ring-color{syntax: "*"; inherits: false;}@property --tw-inset-ring-shadow{syntax: "*"; inherits: false; initial-value: 0 0 #0000;}@property --tw-ring-inset{syntax: "*"; inherits: false;}@property --tw-ring-offset-width{syntax: "<length>"; inherits: false; initial-value: 0px;}@property --tw-ring-offset-color{syntax: "*"; inherits: false; initial-value: #fff;}@property --tw-ring-offset-shadow{syntax: "*"; inherits: false; initial-value: 0 0 #0000;}@property --tw-font-weight{syntax: "*"; inherits: false;}@layer properties{@supports ((-webkit-hyphens: none) and (not (margin-trim: inline))) or ((-moz-orient: inline) and (not (color:rgb(from red r g b)))){*[_ngcontent-%COMP%], [_ngcontent-%COMP%]:before, [_ngcontent-%COMP%]:after, [_ngcontent-%COMP%]::backdrop{--tw-shadow: 0 0 #0000;--tw-shadow-color: initial;--tw-shadow-alpha: 100%;--tw-inset-shadow: 0 0 #0000;--tw-inset-shadow-color: initial;--tw-inset-shadow-alpha: 100%;--tw-ring-color: initial;--tw-ring-shadow: 0 0 #0000;--tw-inset-ring-color: initial;--tw-inset-ring-shadow: 0 0 #0000;--tw-ring-inset: initial;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-offset-shadow: 0 0 #0000;--tw-font-weight: initial}}}

`],changeDetection:0})};var de=(t,n)=>n.id;function he(t,n){if(t&1&&(i(0,"div",3),l(1),o()),t&2){let e=a();r(),v(e.error())}}function fe(t,n){if(t&1){let e=_();i(0,"app-pagination",8),d("change",function(c){h(e);let x=a(2);return f(x.onPageChanged(c))}),o()}if(t&2){let e=a(2);u("pagination",e.pagination())}}function we(t,n){if(t&1&&p(0,"app-newest-story",7),t&2){let e=n.$implicit;u("story",e)}}function ue(t,n){if(t&1&&(p(0,"div",9),i(1,"div",10)(2,"div",11),p(3,"div",12),i(4,"p",13),l(5,"Please Wait..."),o()()()),t&2){let e=a(2);r(2),q("appear",e.isInit)("appear-immediately",e.isInit==!1)}}function ve(t,n){if(t&1&&(g(0,fe,1,1,"app-pagination",4),i(1,"div",5)(2,"div",6),O(3,we,1,1,"app-newest-story",7,de),o(),g(5,ue,6,4),o()),t&2){let e=a();m(e.isInit?0:-1),r(3),I(e.stories),r(2),m(e.loading()?5:-1)}}var F=class t{PAGE_SIZE=12;animationWaitDelayMs=400;stories=[];loading=M(!1);error=M(null);isInit=!1;searchText=null;response=null;pagination=M(null);request={pageIndex:1,pageSize:this.PAGE_SIZE,searchText:""};storiesService=C(N);ngOnInit(){this.refreshData()}onSearch(n){this.searchText=n,!this.loading()&&this.searchByText()}onPageChanged(n){this.loading()||(this.request.pageIndex=n,this.refreshData())}refreshData(){this.loading.set(!0),this.error.set(null),this.response=null,this.searchText=null,this.storiesService.get(this.request).pipe(R(this.animationWaitDelayMs)).subscribe({next:n=>{this.response=n,this.handleSuccess()},error:()=>{this.handleError()}})}handleError(){this.response=null,this.error.set("Failed to load stories"),this.loading.set(!1)}handleSuccess(){if(this.loading.set(!1),this.searchText!=null){this.searchByText();return}this.response&&(this.stories=this.response.stories,this.pagination.set({selectedPage:this.response.pageIndex,totalPages:this.response.totalPages,pageSize:this.response.pageSize,totalItemsCount:this.response.totalItemsCount}),this.isInit=!0)}searchByText(){this.request.pageIndex=1,this.request.searchText=this.searchText??"",this.refreshData()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=w({type:t,selectors:[["app-newest-stories-page"]],decls:5,vars:1,consts:[[1,"p-4"],[1,"flex","mb-4"],[1,"flex-grow",3,"search"],[1,"text-red-500"],[3,"pagination"],[1,"relative"],[1,"stories-grid","my-4"],[3,"story"],[3,"change","pagination"],[1,"absolute","inset-0","flex","flex-row","bg-gray-900","disappear"],[1,"absolute","inset-0","flex","items-center","justify-center","w-full","h-[calc(100dvh-250px)]"],[1,"opacity-0"],[1,"w-16","h-16","bg-gray-50","opacity-100","rounded-2xl","animate-spin"],[1,"pt-5","font-bold","-ml-3"]],template:function(e,s){e&1&&(i(0,"div",0)(1,"div",1)(2,"app-search-bar",2),d("search",function(x){return s.onSearch(x)}),o()(),g(3,he,2,1,"div",3)(4,ve,6,2),o()),e&2&&(r(3),m(s.error()?3:4))},dependencies:[T,E,D],styles:[`.stories-grid[_ngcontent-%COMP%]{display:grid;grid-auto-rows:minmax(0,1fr);gap:calc(var(--spacing, .25rem) * 4)}@media (width >= 48rem){.stories-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,minmax(0,1fr))}}@media (width >= 64rem){.stories-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,minmax(0,1fr))}}@keyframes _ngcontent-%COMP%_changeOpacity{0%{opacity:0}15%{opacity:0}to{opacity:1}}.disappear[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_changeOpacity 1s ease-out forwards}.appear[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_changeOpacity 1s ease-out .7s forwards}.appear-immediately[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_changeOpacity 1s ease-out forwards}

`]})};var _e=[{path:"",component:F}],oe=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=$({type:t});static \u0275inj=j({imports:[J,Q.forChild(_e)]})};export{oe as NewestStoriesModule};
